
UNIVERSAL RCA INSTRUCTION WITH TIMELINE & CONTEXT PARSING
=========================================================

â— ABSOLUTE RULE: NO HARDCODING ALLOWED
--------------------------------------
- DO NOT hardcode failure modes, equipment types, symptoms, prompts, questions, or file structures.
- All logic must be schema-driven, dynamic, and work universally for ANY industrial asset type.
- The system must use AI inference and Evidence Library schema to drive analysisâ€”not fixed logic.

STEP 1: INCIDENT INGESTION AND CONTEXT EXTRACTION
-------------------------------------------------
- Parse both structured fields and freeform incident description.
- Use NLP to extract:
  â€¢ Component involved (pump, motor, valveâ€¦)
  â€¢ Action verbs (leaked, tripped, burned, surgedâ€¦)
  â€¢ Failure symptoms (smoke, vibration, overheatingâ€¦)
  â€¢ Operating context (load, pressure, startupâ€¦)
  â€¢ First observed time, duration, frequency (e.g., â€œsuddenly failed yesterdayâ€)
- If vague, AI must generate clarifying questions automatically.

STEP 2: UNIVERSAL FAILURE MODE HYPOTHESIS GENERATION
-----------------------------------------------------
- AI must generate likely failure modes using:
  â€¢ Parsed keywords from incident
  â€¢ Evidence Library symptom patterns
  â€¢ Internal AI model inference
- Also generate questions for each hypothesis (e.g., â€œWas the seal flush blocked?â€)
- Allow the investigator to âœ… Accept / âŒ Reject / âž• Add More hypotheses.

STEP 3: SMART EVIDENCE REQUEST & CLARIFICATION
----------------------------------------------
- For each accepted hypothesis, system must:
  â€¢ Retrieve required evidence types from Evidence Library
  â€¢ Ask: â€œPlease provide X (IR scan, vibration spectrum, temperature logâ€¦)â€
  â€¢ Show status: [Provided] [Not Available] [Pending]
- If the evidence is unclear or junk:
  â€¢ System must request clearer version (e.g., â€œPlease upload vibration time waveformâ€)
- Evidence Adequacy Scoring: Each file should be auto-evaluated for diagnostic usefulness.

STEP 4: SYMPTOM CHRONOLOGY & TIMELINE ANALYSIS
-----------------------------------------------
- Parse incident timeline elements:
  â€¢ â€œFirst noticedâ€, â€œgraduallyâ€, â€œsuddenlyâ€, â€œyesterdayâ€, â€œwhile startingâ€, etc.
- Identify symptom progression (e.g., vibration â†’ leakage â†’ trip)
- Cross-reference with known fault signature progressions in Evidence Library
- AI should flag unusual sequences or missing transitions.

STEP 5: RCA LOGIC EXECUTION (NO HARD CODING)
---------------------------------------------
- Failure modes must be dynamically matched using:
  â€¢ Symptom â†’ Signature â†’ Evidence â†’ Cause inference
- Confidence scores must drive decisions.
- If low confidence:
  â€¢ AI prompts investigator for more data
  â€¢ Falls back to general hypothesis model and re-evaluates
- All elimination or confirmation of hypotheses must be explainable with audit trace.

STEP 6: HUMAN INTERACTION LAYER (MANDATORY)
-------------------------------------------
- Human must confirm or override each suggested hypothesis.
- Buttons:
  âœ… Accept | âŒ Reject | âž• Add More
- System must store human response, update logic, and re-trigger evidence checks as needed.

STEP 7: RCA OUTPUT WITH COMPLIANCE FIELDS
-----------------------------------------
- Root Cause Structure:
  â€¢ Primary Root Cause
  â€¢ Contributing Factor(s)
  â€¢ Latent Condition(s)
  â€¢ Detection Gap
- Also include:
  â€¢ PHA reference (if any)
  â€¢ MOC related to component
  â€¢ SIS compliance issue (IEC 61511)
  â€¢ Human actions noted (from timeline or logs)
  â€¢ Environmental/external contributing data

STEP 8: EVIDENCE LIBRARY AUTO-ENRICHMENT (REVIEWED BY ADMIN)
-------------------------------------------------------------
- If human confirms a root cause and provides valid evidence:
  â€¢ System suggests update to Evidence Library:
    - New fault signature pattern (keywords, symptom order)
    - New evidence type (e.g., photos, waveform)
    - Better phrasing for AI prompts
- Admin must âœ… approve before update is saved.

RULES FOR SCHEMA-DRIVEN DESIGN
-------------------------------
- The Evidence Library must include:
  â€¢ Fault Signature Pattern
  â€¢ Required Evidence
  â€¢ AI Prompt Structure
- RCA must query Evidence Library ONLY based on symptom & evidence logic.
- No preloading or filtering based on equipment type, group or subtype.

AI FALLBACK / REINFERENCE LOGIC
-------------------------------
- If no failure mode can be inferred with >80% confidence:
  â€¢ System must revert to AI model inference to generate new hypotheses
  â€¢ Prompt user again for clarification or more data
- Never fall back to a hardcoded list

âœ… Architecture should support all asset types, sectors, and data types
âœ… RCA must degrade gracefully in low-data cases and request whatâ€™s needed
âœ… EVERYTHING must be explainable in logs: what matched, what failed, what confidence.

ðŸ’¥ If this instruction is not followed:
- The result will be equipment-specific, inflexible, non-scalable logic
- All fixes must be logic-based, not symptom patches

Final Reminder: Build a universal system, not an expert system with hidden rules.
